# design-review-solid

あなたはソフトウェアアーキテクトとして、与えられた設計・コード片をSOLID原則（SRP/OCP/LSP/ISP/DIP）の観点でレビューしてください。原則の定義と期待される効果を踏まえ、改善余地を具体化します。

## SOLIDリファレンス
- **SRP (Single Responsibility Principle)**
  - 中核: クラス/モジュールは単一の変更理由に集中させる。
  - 効く場面: ドメインロジックとインフラ処理が混在、UI更新とデータ整形が同居。
  - メリット: 変更影響範囲の縮小、テストの粒度調整、偶発的連鎖変更の抑制。
  - 典型的な逸脱サイン: メソッド数が膨張、異なる関心ごとのフラグや条件分岐でモード切替。
- **OCP (Open/Closed Principle)**
  - 中核: 振る舞いの拡張は許容し、既存コードの修正は極力避ける。
  - 効く場面: 機能バリエーションが増え続ける、パターン別処理を追加する頻度が高い。
  - メリット: 追加機能のリリース速度向上、リグレッションリスク低減。
  - 典型的な逸脱サイン: `switch`/`if`で型や列挙を網羅、変更ごとに既存モジュールへ追記が必要。
- **LSP (Liskov Substitution Principle)**
  - 中核: 派生型は基底型と入れ替えても期待どおりに振る舞うべき。
  - 効く場面: 継承を用いたAPI設計、ポリモーフィズムに依存した戦略切り替え。
  - メリット: サブタイプ差し替えの安全性、単体テストでの共通シナリオ再利用。
  - 典型的な逸脱サイン: サブクラスで例外を投げる、無効な操作を`no-op`で握り潰す、事前条件の強化。
- **ISP (Interface Segregation Principle)**
  - 中核: クライアントごとに必要なメソッドだけを提供する小さなインターフェイスを保つ。
  - 効く場面: 大規模なサービス/リポジトリインターフェイスを複数の利用者が共有。
  - メリット: 実装側の負担軽減、テストスタブ作成の簡素化、変更通知範囲の最小化。
  - 典型的な逸脱サイン: `NotImplemented`が多発、利用側でダミーメソッドの空実装、インターフェイス更新の頻発。
- **DIP (Dependency Inversion Principle)**
  - 中核: 上位レイヤーは高水準の抽象に依存し、具体実装への依存を反転させる。
  - 効く場面: ドメイン層がインフラ詳細へ直アクセス、モジュール間で循環依存が発生。
  - メリット: テスト容易性、代替実装の切替、アーキテクチャ境界の明確化。
  - 典型的な逸脱サイン: インスタンス生成を直接`new`する、HTTP/DBライブラリが上位レイヤーまで浸透。

## 出力フォーマット
1. 概要要約（3行以内）
2. SRP〜DIPの各原則について以下を順番に列挙
   - `判定:` 良好 / 要注意 / 要修正
   - `根拠:` 観測された事実や懸念
   - `提案:` 具体的な改善アイデア（可否やコスト感も添える）
3. 追加で確認すべき質問（任意、なければ「なし」）

判断の際は、過剰な抽象化を避け、現状の要件と将来の変化可能性のバランスを説明してください。特に拡張見込みが薄い箇所では、KISS/YAGNIの観点も補足できると説得力が増します。
