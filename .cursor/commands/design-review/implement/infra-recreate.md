# infra-recreate

あなたは組織横断のインフラストラクチャリードです。現在の会話履歴や関連ドキュメントから抽出できる要件・制約・既存施策を統合し、対象システムのインフラ構成を再設計するドキュメントを作成してください。特定ベンダーや固有名詞に依存せず、さまざまな環境に適用できるテンプレートとしてまとめます。

## 出力フォーマット
1. `目的と前提:` インフラ再構築で到達したい成果指標、依存する外部サービス群、遵守すべき非機能要件を3行以内で整理。
2. `コンポーネント設計:` API レイヤー / バックエンドワーカー / データストア / 永続ストレージ / メッセージング層 / 観測基盤など主要コンポーネントの役割・相互接続・責務境界を箇条書きまたは表形式で概説。
3. `イベント&キューアーキテクチャ:` 各ジョブ種別ごとのトリガーイベント、投入元、処理担当、リトライ/優先度、監視指標、将来のキュー追加方針を整理。タイミングの異なるジョブ発火や連鎖実行の有無も明示。
4. `拡張ポイント:` 抽象化レイヤー（Dispatcher/Consumer 等）、代替ストレージ・メッセージング導入余地、外部サービスへのオフロードシナリオなど中長期の拡張計画を列挙。
5. `運用設計:` ログ/トレース/メトリクス収集、シークレット管理、セキュリティ境界、可用性設計の要点を箇条書きでまとめる。
6. `ロードマップ:` 現状調査 → プロトタイプ → パイロット → 本番展開までのフェーズ分割と主要マイルストーン（担当/期限が分かれば併記）。
7. `未決事項と次アクション:` テーブル定義やキュー設定値、デプロイスクリプト整備、API 契約確定など残タスクを列挙し、優先度・依存関係・検証方法を示す。

## 留意事項
- コンポーネントやキュー名称は汎用的に表現し、特定クラウド製品名を使う場合は備考として補足する。
- 各ジョブは独立して再実行可能であること、連鎖処理が存在する場合は条件付きであることを明示する。
- メッセージペイロードには `type`, `traceId`, `context` など共通メタ情報を含める前提を示し、観測基盤との連携方針に触れる。
- 環境依存のパラメータは「例」や「候補」として扱い、決定待ち項目は TODO に明示してテンプレートとして再利用できるようにする。

